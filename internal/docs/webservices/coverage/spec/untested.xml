<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE spec SYSTEM "https://raw.githubusercontent.com/eclipse-ee4j/jakartaee-tck/master/internal/docs/dtd/spec_assertions.dtd">
<!--

    Copyright (c) 2018, 2020 Oracle and/or its affiliates. All rights reserved.

    This program and the accompanying materials are made available under the
    terms of the Eclipse Public License v. 2.0, which is available at
    http://www.eclipse.org/legal/epl-2.0.

    This Source Code may also be made available under the following Secondary
    Licenses when the conditions for such availability set forth in the
    Eclipse Public License v. 2.0 are satisfied: GNU General Public License,
    version 2 with the GNU Classpath Exception, which is available at
    https://www.gnu.org/software/classpath/license.html.

    SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0

-->

<spec>
  <next-available-id>1</next-available-id>
  <previous-id>0</previous-id>
  <technology>WS4EE</technology>
  <id>WS4EE</id>
  <name>Web Services for Java EE</name>
  <version>1.2</version>
  <location>
    <chapters />
    <chapter id="3" name="Overview">
      <sections>
        <section id="3.3.1" name="Web Service Components" />
        <section id="3.8.2" name="Not in Scope" />
        <section id="3.6" name="Standard Services" />
        <section id="3.2" name="Web Service" />
        <section id="3.10" name="Web Service Server View" />
        <section id="3.3" name="Web Services for JavaEE Overview" />
        <section id="3.5" name="Portablity" />
        <section id="3.8" name="Scope" />
        <section id="3.8.1" name="Scope" />
        <section id="3.9" name="Web Service Client View" />
        <section id="3.6.2" name="JAX-WS 2.0" />
        <section id="3.1" name="Web Services Architecture Overview" />
        <section id="3.4" name="Platform Roles" />
        <section id="3.3.2" name="Web Service Containers" />
        <section id="3.7" name="Interoperability" />
        <section id="3.6.1" name="JAX-RPC 1.1" />
      </sections>
    </chapter>
    <chapter id="5" name="Server Programming Model">
      <sections>
        <section id="5.4" name="Packaging" />
        <section id="5.4.1" name="The wsdl directory" />
        <section id="5.3.5" name="Protocol Binding" />
        <section id="5.5" name="Transactions" />
        <section id="5.3.4" name="Service Custom Serializers/Deserializers" />
        <section id="5.1" name="Goals" />
        <section id="5.3.6" name="MTOM/XOP Support" />
        <section id="5.3.3" name="Service Implementation Bean Life Cycle" />
        <section id="5.4.4" name="Catalog Packaging" />
        <section id="5.3.2" name="Service Implementation Bean" />
        <section id="5.4.3" name="Web App Module Packaging" />
        <section id="5.3" name="Port Component Model Specification" />
        <section id="5.6" name="Container Provider Responsibilities" />
        <section id="5.4.2" name="EJB Module Packaging" />
        <section id="5.4.5" name="Assembly within an EAR file" />
        <section id="5.3.1" name="Service Endpoint Interface" />
        <section id="5.2" name="Concepts" />
      </sections>
    </chapter>
    <chapter id="7" name="DeploymentDescriptors">
      <sections>
        <section id="7.2.3" name="Assembler Responsibilities" />
        <section id="7.3.3" name="Assembler Responsibilities" />
        <section id="7.1.3" name="Assembler Responsibilities" />
        <section id="7.1.5" name="Web Services Deployment Descriptor XML Schema" />
        <section id="7.3.1" name="Overview" />
        <section id="7.2.5" name="Web Services Client Service Referece XML Schema" />
        <section id="7.1" name="Web Services Deployment Descriptor" />
        <section id="7.1.2" name="Developer Responsibilities" />
        <section id="7.3.2" name="Developer Responsibilities" />
        <section id="7.1.1" name="Overview" />
        <section id="7.2" name="Service Reference Deployment Descriptor Information" />
        <section id="7.2.4" name="Deployer Responsibilities" />
        <section id="7.3.5" name="JAX-RPC Mapping Schema" />
        <section id="7.2.1" name="Overview" />
        <section id="7.1.4" name="Deployer Responsibilities" />
        <section id="7.3" name="JAX-RPC Mapping Deployment Descriptor" />
        <section id="7.2.2" name="Developer Responsibilities" />
        <section id="7.3.4" name="Deployer Responsibilities" />
      </sections>
    </chapter>
    <chapter id="2" name="Objectives">
      <sections>
        <section id="2.1.2" name="Service Development Goals" />
        <section id="2.1.5" name="Web Services Registry Goals" />
        <section id="2.1.1" name="Client Model Goals" />
        <section id="2.1.3" name="Service Deployment Goals" />
        <section id="2.1.4" name="Service Publication Goals" />
      </sections>
    </chapter>
    <chapter id="9" name="Security">
      <sections>
        <section id="9.3.3" name="Integrity and Confidentiality" />
        <section id="9.1" name="Concepts" />
        <section id="9.1.1" name="Authentication" />
        <section id="9.3" name="Specification" />
        <section id="9.1.4" name="Audit" />
        <section id="9.2.1" name="Assumptions" />
        <section id="9.1.2" name="Authorization" />
        <section id="9.1.5" name="Non-Repudiation" />
        <section id="9.3.2" name="Authorization" />
        <section id="9.3.1" name="Authentication" />
        <section id="9.2" name="Goals" />
        <section id="9.1.3" name="Ingerity and Confidentiality" />
      </sections>
    </chapter>
    <chapter id="4" name="Client Programming Model">
      <sections>
        <section id="4.2.9" name="Packaging" />
        <section id="4.2.7" name="JAX-WS Asynchronous Operations" />
        <section id="4.2.2" name="jakarta.xml.ws.WebServiceRef annotation" />
        <section id="4.1" name="Concepts" />
        <section id="4.2.6" name="JAX-WS Dispatch APIs" />
        <section id="4.2.4" name="Port Stub and Dynamic Proxy" />
        <section id="4.2.8" name="JAX-RPC Custom Serializers/Deserializers" />
        <section id="4.2.1" name="Service Lookup" />
        <section id="4.2.5" name="JAX-RPC and JAX-WS Properties" />
        <section id="4.2" name="Specification" />
        <section id="4.2.3" name="Service Interface API" />
      </sections>
    </chapter>
    <chapter id="8" name="Deployment">
      <sections>
        <section id="8.2" name="Container Provider Responsibilities" />
        <section id="8.2.5" name="Publishing the deployed WSDL" />
        <section id="8.2.9" name="Mapping Requirements" />
        <section id="8.2.6" name="Service and Generate Service Interface/Class Implementation" />
        <section id="8.3" name="Overview" />
        <section id="8.2.3" name="Generate deployed WSDL" />
        <section id="8.2.10" name="Deployment failure conditions" />
        <section id="8.2.2" name="Generate Web Service Implementation Classes" />
        <section id="8.2.7" name="Static stub generation" />
        <section id="8.2.1" name="Deployment Artifacts" />
        <section id="8.2.4" name="Publishing the service-ref WSDL" />
        <section id="8.1" name="Overview" />
        <section id="8.2.8" name="Type mappings" />
      </sections>
    </chapter>
    <chapter id="6" name="Handlers">
      <sections>
        <section id="6.2.2" name="Programming Model" />
        <section id="6.2" name="Specification" />
        <section id="6.4" name="Object Interaction Diagrams" />
        <section id="6.2.4" name="Container Provider Responsibilities" />
        <section id="6.4.1" name="Client Web service method access" />
        <section id="6.2.1" name="Scenarios" />
        <section id="6.2.3" name="Developer Responsibilities" />
        <section id="6.4.2" name="EJB Web service method invocation" />
        <section id="6.1" name="Concepts" />
        <section id="6.3" name="Packaging" />
      </sections>
    </chapter>
    <chapter id="1" name="Introduction">
      <sections>
        <section id="1.1" name="Target Audience" />
        <section id="1.3" name="Specification Oranization" />
        <section id="1.2" name="Acknowledgements" />
        <section id="1.4" name="Document Conventions" />
      </sections>
    </chapter>
  </location>
  <assertions>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:50</id>
      <description>The Enterprise JavaBeans
			specification section 4.3 defines the allowed container service
			access requirements</description>
      <location chapter="5" section="3.2.3.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:53</id>
      <description>A JAX-RPC Service Endpoint
			must implement jakarta.servlet.SingleThreadModel if single threaded
			access is required by the component. A container must serialize
			method requests for a Service Implementation Bean that implements the
			SingleThreadModel interface.</description>
      <location chapter="5" section="3.2.4.1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:95</id>
      <description>a Handler.handleResponse()
			method must not change the number of parts in the message, or types
			of the message parts. A container must throw a SOAP fault with a
			faultcode of soap-env:Server back to the client if the Handler does
			this</description>
      <location chapter="6" section="2.2.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:108</id>
      <description>The container must setup
			the Port component's execution environment before invoking the
			handle&lt;action&gt;() methods of a handler chain. Handlers run
			under the same execution environment as the Port component's business
			methods</description>
      <location chapter="6" section="2.4" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:153</id>
      <description>Before a request can be
			serviced, the container must instantiate a Service Implementation
			Bean and ready it for method requests. A container readies a bean
			instance by first calling newInstance on the Service Implementation
			Bean class to create an instance. The container then calls the life
			cycle methods on the Service Implementation Bean that are specific to
			the container. For the web container, with JAX-RPC runtime, it calls the init method on the
			instance if the Service Implementation Bean class implements the
			ServiceLifecycle. For web containers with JAX-WS runtime, it calls the method annotated with jakarta.annotation.PostConstruct annotation. For the EJB container, it calls the setSessionContext and ejbCreate methodsmethod annotated with jakarta.annotation.PostConstruct annotation . The jakarta.annotation.PostConstruct callback occurs after any dependency injection has been performed by the container and before the first business method invocation on the bean.</description>
      <location chapter="5" section="3.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:156</id>
      <description>A Web Services for JavaEE
			provider is required to provide all interfaces and classes of the
			javax.xml.rpc.handler package and jakarta.xml.ws.handler package.</description>
      <location chapter="6" section="2.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:158</id>
      <description>The life cycle of a
			Handler is controlled by the container and is illustrated in Figure
			7.</description>
      <location chapter="6" section="2.2.1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:164</id>
      <description>The container may throw a
			java.lang.IllegalStateException if the environment is accessed from
			any other Handler method and the environment is not available.</description>
      <location chapter="6" section="2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:211</id>
      <description>If the specified wsdl-file
			has more than one service element, the developer must specify the
			service-qname.</description>
      <location chapter="7" section="2.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:215</id>
      <description>If the Service
			Implementation is a stateless session EJB, the developer must also
			specify the Service Endpoint Interface in the EJB deployment
			descriptor using the service-endpoint element.</description>
      <location chapter="7" section="1.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:216</id>
      <description>A Handler may access
			transactional resources defined by a component's resource-refs.
			Resources are accessed under a transaction context according to
			section 6.2.2.3.</description>
      <location chapter="6" section="2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:229</id>
      <description>If port-name is not
			specified, the handler is assumed to be associated with all ports of
			the service.</description>
      <location chapter="7" section="2.5" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:230</id>
      <description>The handler-name element
			defines the name of the handler. The name must be unique within the
			module.</description>
      <location chapter="7" section="2.5" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:234</id>
      <description>The mapping for OUT and
			IN/OUT parameters must be the Java class-type representation of the
			WSDL type. This is true even when multiple OUT or IN/OUT parts exist
			within a WSDL message. In this case, the Holder type is inferred
			based on the specified class-type.</description>
      <location chapter="7" section="3.2.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:242</id>
      <description>The wrapped-element
			indicator should only be specified when a WSDL message wraps an
			element type.</description>
      <location chapter="7" section="3.5" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:4012</id>
      <description>Required properties A container provider is required to support the javax.xml.rpc.service.endpoint.address property in JAX-RPC and jakarta.xml.ws.service.endpoint.address property in JAX-WS to allow components to dynamically redirect a Stub/proxy to a different URI.</description>
      <location chapter="4" section="2.6.1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:5003</id>
      <description>The optional @PostConstruct or @PreDestroy annotations A Service Implementation Bean may use jakarta.annotation.PostConstruct or jakarta.annotation.PreDestroy annotation on methods for lifecycle event callbacks. The methods annotated with jakarta.annotation.PostConstruct or jakarta.annotation.PreDestroy annotation allow the web container to notify a Service Implementation Bean instance of impending changes in its state. The bean may use the notification to prepare its internal state for the transition. If the bean implements methods that are annotated with jakarta.annotation.PostConstruct or jakarta.annotation.PreDestroy annotations then the container is required to call them in the manner described below. The container must call the method annotated with jakarta.annotation.PostConstruct before it can start dispatching requests to the methods exposed as Web Service operations of the bean. The bean may use the container notification to ready its internal state for receiving requests. The container must notify the bean of its intent to remove the bean instance from the container s working set by calling the method annotated with jakarta.annotation.PreDestroy annotation. A container may not call this method while a request is being processed by the bean instance. The container may not dispatch additional requests to the methods exposed as Web Service operations of the bean after this method is called.</description>
      <location chapter="5" section="3.2.4.2.1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:5008</id>
      <description>Publishing Endpoints   javax. xml.ws.Endpoint JAX-WS provides functionality for creating and publishing Web Service endpoints dynamically using jakarta.xml.ws.Endpoint API. The use of this functionality is considered non-portable in a managed environment. It is required that both the Servlet and the EJB container disallow the publishing of the Endpoint dynamically, by not granting the publishEndpoint security permission. Please refer to details on this in Section 5.2 of the JAX-WS specification.</description>
      <location chapter="5" section="3.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6000</id>
      <description>Handlers are not able to re-target a request to a different component.</description>
      <location chapter="6" section="1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6001</id>
      <description>Handlers cannot change the WSDL operation nor can Handlers change the message part types and number of parts.</description>
      <location chapter="6" section="1" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6025</id>
      <description>Patterns on Service names and Port names are also allowed, where in the handlers in a handler chain could be specific to a Service name pattern or Port name pattern.</description>
      <location chapter="6" section="2.2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6041</id>
      <description>Access to the java:comp/env contexts must be supported from the method annotated with jakarta.annotation.PostConstruct.</description>
      <location chapter="6" section="2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6042</id>
      <description>Access to the java:comp/env contexts must be supported from handle &lt;action&gt;() methods.</description>
      <location chapter="6" section="2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6044</id>
      <description>A Handler may access transactional resources defined by a component s resource-refs.</description>
      <location chapter="6" section="2.3" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6046</id>
      <description>A JAX-WS based container must call the lifecycle method annotated with jakarta.annotation.PostConstruct within the context of a Port component s environment. The container must ensure the Port component s env-entrys are setup for this lifecycle method to access.</description>
      <location chapter="6" section="2.4" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6050</id>
      <description>In a JAX-WS based container, a Handler chain is processed according to the JAX-WS specification section
                   9.2.1.2. In addition to this, the ordering of any given type of Handler (logical or protocol) in the 
                   deployment descriptor must be maintained.</description>
      <location chapter="6" section="2.4" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:6052</id>
      <description>A JAX-WS based container must carry out any injections (if any) requested by the handler, typically via
                   the @Resource annotation (see section 2.2 of JSR-250 Common Annotations for Java Platform specification).</description>
      <location chapter="6" section="2.4" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:7000</id>
      <description>Service QName. In addition to specifying the WSDL document, the developer may also specify the WSDL Service QName in the wsdl-service element for each Port defined in the deployment descriptor when JAX-WS based runtime is used. This element is required if the portcomponent being defined is a Provider Interface defined by JAX-WS.</description>
      <location chapter="7" section="1.2" />
    </assertion>
    <assertion required="true" impl-spec="false" defined-by="technology" status="active" testable="true">
      <id>WS4EE:SPEC:7003</id>
      <description>Handlers. A developer may optionally specify handlers associated with the port-component using either the handler element when JAX-RPC based runtime is used. or the handlerchains element when JAX-WS based runtime is used. With JAX-WS, the soap-header element declared in the deployment descriptor is not required since that information is embedded in the implementation of the Handler class. With JAX-WS, init-params element in the deployment descriptors is no longer used. If needed, the developer should use the environment entry elements (&lt;env-entry&gt;) declared in the application component's deployment descriptor for this purpose. These can be injected into the handler using the @Resource annotation or looked up using JNDI.</description>
      <location chapter="7" section="1.2" />
    </assertion>
  </assertions>
</spec>

