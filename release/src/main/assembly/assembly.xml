<?xml version="1.0" encoding="UTF-8"?>
<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.2.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.2.0 https://maven.apache.org/xsd/assembly-2.2.0.xsd">
    <id>dist</id>
    <baseDirectory>platform-tck-${project.version}</baseDirectory>
    <formats>
        <format>zip</format>
    </formats>

    <files>
        <!-- This is the final EFTL license -->
        <file>
            <source>../LICENSE_EFTL.md</source>
            <destName>LICENSE.md</destName>
        </file>
        <file>
            <source>artifact-install.pom</source>
            <outputDirectory>artifacts</outputDirectory>
            <destName>pom.xml</destName>
            <filtered>true</filtered>
        </file>

    </files>
    <fileSets>
        <fileSet>
            <directory>${project.basedir}</directory>
            <outputDirectory>/</outputDirectory>
            <includes>
                <include>README.adoc</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/../install/jakartaee/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>certificates/**</include>
                <include>*.config</include>
                <include>*.dat</include>
                <include>*.policy</include>
                <include>ts.jte</include>
            </includes>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <includes>
                <include>${project.groupId}:appclient</include>
                <include>${project.groupId}:assembly</include>
                <include>${project.groupId}:common</include>
                <include>${project.groupId}:connector</include>
                <include>${project.groupId}:ejb30</include>
                <include>${project.groupId}:ejb32</include>
                <include>${project.groupId}:el-platform-tck</include>
                <include>${project.groupId}:integration</include>
                <include>${project.groupId}:javaee</include>
                <include>${project.groupId}:javamail</include>
                <include>${project.groupId}:jaxrs</include>
                <include>${project.groupId}:jdbc</include>
                <include>${project.groupId}:jms-tck</include>
                <include>${project.groupId}:persistence-platform-tck-tests</include>
                <include>${project.groupId}:jsonb</include>
                <include>${project.groupId}:jsonp</include>
                <include>${project.groupId}:jsp</include>
                <include>${project.groupId}:jstl</include>
                <include>${project.groupId}:jta</include>
                <include>${project.groupId}:libutil</include>
                <include>${project.groupId}:runtime</include>
                <include>${project.groupId}:samples</include>
                <include>${project.groupId}:servlet</include>
                <include>${project.groupId}:signaturetest</include>
                <include>${project.groupId}:tsharness</include>
                <include>${project.groupId}:websocket-tck-platform-tests</include>
                <include>${project.groupId}:xa</include>
            </includes>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <outputDirectory>artifacts</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
        </dependencySet>
        <dependencySet>
            <includes>
                <include>jakarta.enterprise:cdi-tck-dist-libs</include>
            </includes>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <outputDirectory>/lib</outputDirectory>
            <useProjectArtifact>false</useProjectArtifact>
            <unpack>true</unpack>
        </dependencySet>
        <dependencySet>
            <includes>
                <include>jakarta.platform:jakarta.jakartaee-tck-user-guide:zip</include>
            </includes>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>META-INF/</exclude>
                </excludes>
            </unpackOptions>
            <outputDirectory>doc</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
        </dependencySet>
    </dependencySets>

</assembly>
